---
project: Carrier Cross Sections
project_gitub: https://github.com/laurarnichols/carrierCrossSections.git
summary: This program takes input from Quantum ESPRESSO and calculates the cross section of a defect that can capture or scatter a carrier.
src_dir: ../QE-dependent/QE-5.3.0/Export/src
src_dir:../TME/src
src_dir:../Mj/src
src_dir:../LSF/src/zerothOrder
src_dir:../LSF/src/linearTerms
src_dir:../Sigma/src
output_dir:./documentation
media_dir:./media
display: public
         protected
         private
source: true
page_dir: ./pages
---

## Installation
### Dependencies
Install all of the required dependencies (commands given for Unix environment):
```bash
sudo apt-get update
sudo apt install gfortran
sudo apt install libmpich-dev
sudo apt install libopenmpi-dev
sudo apt-get install python-pip python-dev build-essential
sudo pip install ford
sudo apt-get install graphviz
sudo wget https://github.com/QEF/q-e/archive/qe-5.3.tar.gz
sudo apt-get install git
```

### Set up Quantum Espresso
* Change to whatever directory you saved the QE tar file in on the CLI
* Decompress the tar file using `tar -xvzf q-e-qe-5.3.tar.gz`
* Change into the `q-e-qe-5.3` directory and run `./configure`
* Confirm that the last line of output is `configure: success`
* Run `make pw pp ph` to build the PW, PP, and PHonon packages

### Compile Source
* Clone the repository using
```bash
git clone https://github.com/laurarnichols/carrierCrossSections.git
```

* Change into the `carrierCrossSections` directory
* Open the `Makefile` and edit the path to Quantum Espresso to match your system 

_Note: Make sure that your path does not have a `/` at the end or there will be an error_
* You should now be able to make the target you want (e.g., to compile everything, use `make all_QE-5.3.0`)
* For a list of some possible targets, read through the `Makefile` or type `make`

## Documentation

This documentation is generated by [FORD](https://github.com/Fortran-FOSS-Programmers/ford). 

@Note
This documentation is in progress. Please report any issues you find.
@endnote

## How to Run
I don't know how to run yet, so this section contains notes to try to figure that out. [Here](carrierCapture.pdf) is a flow chart describing 
how the programs connect as far as I know.

* TME stands for transition matrix element
* LSF stands for line shape function
* Sigma is likely the cross section calculation
* Mj is likely calculating equation 46 (for linear phonon TMEs)
* If cross section (sigma) is goal (zeroth order):
  * TME and LSF --> Sigma ?
  * QE --> TME ?
  
## Input and Output

* QE:
  * Input:
    * `scf.in`
  * Output: 
    * `scf.out`
    * output directory (e.g. `tmp`)
* Export:
  * Input:
    * output directory
  * Output:
    * export directory
* TME:
  * Input:
    * export directory
  * Output: 
    * VfisVsE
* LSF:
  * Input:
    * phonons_disp.dat --> where does this come from?
  * Output:
    * lsfVsEwithUpTo<%i>phonons
* Sigma
  * Input:
    * VfisVsE
    * lsfVsEwithUpTo<%i>phonons
   
![This browser does not support images. [View on GitHub](https://github.com/laurarnichols/carrierCrossSections/blob/master/carrierCapture.pdf)](|media|/carrierCapture.svg)
